{
	"info": {
		"_postman_id": "9680b07d-0d6d-4ec9-8c82-a4c713d61202",
		"name": "/api/v1/clients",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "37354928"
	},
	"item": [
		{
			"name": "Listar todas os clientes - 200 OK",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Response status code is 200\", function () {\r",
							"  pm.expect(pm.response.code).to.equal(200);\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{bearer_token}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://fap-clinic.stage.b2b.kompa.com.br/api/v1/clients",
					"protocol": "https",
					"host": [
						"fap-clinic",
						"stage",
						"b2b",
						"kompa",
						"com",
						"br"
					],
					"path": [
						"api",
						"v1",
						"clients"
					]
				}
			},
			"response": []
		},
		{
			"name": "Criar um cliente   - 201 Created",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"POST - Verificar Criação do Cliente\", function() {\r",
							"    pm.expect(pm.response.code).to.eql(201);\r",
							"    const responseData = pm.response.json();\r",
							"    pm.environment.set(\"clientId\", responseData.id);\r",
							"    console.log(\"Cliente criado com ID:\", responseData.id);\r",
							"});\r",
							"// Test for the response code\r",
							"pm.test(\"Status code is 201\", function () {\r",
							"    pm.response.to.have.status(201);\r",
							"});\r",
							"\r",
							"// Test for the response time\r",
							"pm.test(\"Response time is less than 600ms\", function () {\r",
							"    pm.expect(pm.response.responseTime).to.be.below(600);\r",
							"});\r",
							"\r",
							"// Test for the content type of the response\r",
							"pm.test(\"Content type is application/json\", function () {\r",
							"    pm.response.to.have.header('Content-Type', 'application/json');\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Gerar CNPJ dinâmico\r",
							"const cnpjBase = \"98.\" + Math.floor(Math.random() * 900) + 100 + \".432/0001\";\r",
							"const cnpj = cnpjBase.substring(0, 18);\r",
							"pm.environment.set(\"dynamicCNPJ\", cnpj);\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"cnae_classification_relation\": {\r\n    \"classification_type\": \"Atendimento Geral\",\r\n    \"description\": \"Serviços gerais de atendimento ao paciente\",\r\n    \"rate\": 150\r\n  },\r\n  \"documents_relation\": {\r\n    \"filename\": \"doc.pdf\",\r\n    \"url\": \"http://...\"\r\n  },\r\n  \"coordinator_relation\": {\r\n    \"name\": \"Admin Atualizado\",\r\n    \"crm\": \"CRM1234\",\r\n    \"email\": \"atualizado@example.com\",\r\n    \"phone\": \"1133334444\",\r\n    \"state\": \"SP\"\r\n  },\r\n  \"cnpj\": \"{{dynamicCNPJ}}\",\r\n  \"social_name\": \"Cliente Y SA\",\r\n  \"state_registration\": \"654321\",\r\n  \"company_type\": \"SA\",\r\n  \"legal_representative\": \"Ciclano de Souza\",\r\n  \"pis_number\": \"987.65432.10-2\",\r\n  \"contact_name\": \"Maria\",\r\n  \"contact_email\": \"maria@cliente.com\",\r\n  \"phone\": \"1144445555\",\r\n  \"mobile_phone\": \"1191112222\",\r\n  \"exam_price_table_id\": 1,\r\n  \"specialty_price_table_id\": 1,\r\n  \"client_addresses_relation\": [\r\n    {\r\n      \"zip_code\": \"12345-678\",\r\n      \"street\": \"Av. Brasil\",\r\n      \"number\": \"1000\",\r\n      \"complement\": \"Apto 10\",\r\n      \"neighborhood\": \"Centro\",\r\n      \"city\": \"São Paulo\",\r\n      \"state\": \"SP\"\r\n    }\r\n  ]\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://fap-clinic.stage.b2b.kompa.com.br/api/v1/clients\n",
					"protocol": "https",
					"host": [
						"fap-clinic",
						"stage",
						"b2b",
						"kompa",
						"com",
						"br"
					],
					"path": [
						"api",
						"v1",
						"clients\n"
					]
				}
			},
			"response": []
		},
		{
			"name": "Obter Cliente pelo ID- 200 OK",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Test for status code\r",
							"pm.test(\"Status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"// Test for content type\r",
							"pm.test(\"Content type is application/json\", function () {\r",
							"    pm.response.to.have.header(\"Content-Type\", \"application/json\");\r",
							"});\r",
							"\r",
							"// Verify client address city\r",
							"pm.test(\"Verify client address city\", function () {\r",
							"    const responseBody = pm.response.json();\r",
							"    pm.expect(responseBody.client_addresses_relation[0].city).to.eql(\"São Paulo\");\r",
							"});\r",
							"\r",
							"// Verify contact email\r",
							"pm.test(\"Verify contact email\", function () {\r",
							"    const responseBody = pm.response.json();\r",
							"    pm.expect(responseBody.contact_email).to.eql(\"maria@cliente.com\");\r",
							"});\r",
							"\r",
							"// Verify mobile phone\r",
							"pm.test(\"Verify mobile phone\", function () {\r",
							"    const responseBody = pm.response.json();\r",
							"    pm.expect(responseBody.mobile_phone).to.eql(\"1191112222\");\r",
							"});\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Garantir que o clientId esteja armazenado\r",
							"const clientId = pm.environment.get(\"clientId\");\r",
							"\r",
							"if (!clientId) {\r",
							"    throw new Error(\"ID do cliente não está definido no ambiente.\");\r",
							"}\r",
							"\r",
							"console.log(\"ID utilizado para o GET:\", clientId);\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "https://fap-clinic.stage.b2b.kompa.com.br/api/v1/clients/{{clientId}}",
					"protocol": "https",
					"host": [
						"fap-clinic",
						"stage",
						"b2b",
						"kompa",
						"com",
						"br"
					],
					"path": [
						"api",
						"v1",
						"clients",
						"{{clientId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Atualizar um cliente existente - 200 OK",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Response status code is 200\", function () {\r",
							"    pm.response.to.have.status(200);\r",
							"});\r",
							"\r",
							"\r",
							"pm.test(\"Content-Type is application/json\", function () {\r",
							"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.include(\"application/json\");\r",
							"});\r",
							"\r",
							""
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Gerar CNPJ dinâmico\r",
							"const cnpjBase = \"98.\" + Math.floor(Math.random() * 900) + 100 + \".432/0001\";\r",
							"const cnpj = cnpjBase.substring(0, 18);\r",
							"pm.environment.set(\"dynamicCNPJ\", cnpj);"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "PUT",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"cnae_classification_relation\": {\r\n    \"classification_type\": \"Atendimento Geral\",\r\n    \"description\": \"Serviços gerais de atendimento ao paciente\",\r\n    \"rate\": 150\r\n  },\r\n  \"documents_relation\": {\r\n    \"filename\": \"doc.pdf\",\r\n    \"url\": \"http://...\"\r\n  },\r\n  \"coordinator_relation\": {\r\n    \"name\": \"Admin Atualizado\",\r\n    \"crm\": \"CRM1234\",\r\n    \"email\": \"atualizado@example.com\",\r\n    \"phone\": \"1133334444\",\r\n    \"state\": \"SP\"\r\n  },\r\n  \"cnpj\": \"{{dynamicCNPJ}}\",\r\n  \"social_name\": \"Cliente Y SA\",\r\n  \"state_registration\": \"654321\",\r\n  \"company_type\": \"SA\",\r\n  \"legal_representative\": \"Ciclano de Souza\",\r\n  \"pis_number\": \"987.65432.10-2\",\r\n  \"contact_name\": \"Maria\",\r\n  \"contact_email\": \"maria@cliente.com\",\r\n  \"phone\": \"1144445555\",\r\n  \"mobile_phone\": \"1191112222\",\r\n  \"exam_price_table_id\": 1,\r\n  \"specialty_price_table_id\": 1,\r\n  \"client_addresses_relation\": [\r\n    {\r\n      \"zip_code\": \"12345-678\",\r\n      \"street\": \"Av. Brasil\",\r\n      \"number\": \"1000\",\r\n      \"complement\": \"Apto 10\",\r\n      \"neighborhood\": \"Centro\",\r\n      \"city\": \"São Paulo\",\r\n      \"state\": \"SP\"\r\n    }\r\n  ]\r\n}\r\n",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "https://fap-clinic.stage.b2b.kompa.com.br/api/v1/clients/{{clientId}}",
					"protocol": "https",
					"host": [
						"fap-clinic",
						"stage",
						"b2b",
						"kompa",
						"com",
						"br"
					],
					"path": [
						"api",
						"v1",
						"clients",
						"{{clientId}}"
					]
				}
			},
			"response": []
		},
		{
			"name": "Deletar um feriado - 204 No Content",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"DELETE - Verificar Exclusão do Cliente\", function() {\r",
							"    pm.expect(pm.response.code).to.eql(204);\r",
							"    console.log(\"Cliente excluído com sucesso.\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Verifica se o clientId foi salvo no ambiente\r",
							"if (!pm.environment.get(\"clientId\")) {\r",
							"    throw new Error(\"clientId não encontrado. Execute o POST primeiro.\");\r",
							"}"
						],
						"type": "text/javascript",
						"packages": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "https://fap-clinic.stage.b2b.kompa.com.br/api/v1/clients/{{clientId}}\n",
					"protocol": "https",
					"host": [
						"fap-clinic",
						"stage",
						"b2b",
						"kompa",
						"com",
						"br"
					],
					"path": [
						"api",
						"v1",
						"clients",
						"{{clientId}}\n"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{bearer_token}}\n",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "bearer_token",
			"value": "",
			"type": "string"
		}
	]
}